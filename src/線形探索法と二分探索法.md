# 線形探索法と二分探索法

同じ問題に対して、異なるアルゴリズムがいかにして大きく異なる効率性を持つかを知るために、ちょっとしたゲームをしてみましょう。『数当てゲーム（High & Low）』と呼ばれるゲームです。

1. コンピューター(🖥️)は1から100までの整数をランダムに選択します。
2. あなた(👨‍🎓)はコンピューター(🖥️)が選んだ数字を見つけるまで数字を推測し続けます。
3. コンピューター(🖥️)は、あなた(👨‍🎓)の推測が、「小さすぎる」か、「大きすぎる」か、または「正解」か、を毎回教えてくれます。

### 線形探索法（リニアサーチ）

もし、1から順に、`1、2、3、4 ...`  といった具合に推測を始めると、次のようになります。

```
👨‍🎓: あなたが思い浮かべた数字は 1 ですか？
🖥️: 小さすぎます
👨‍🎓: 2 は？
🖥️: 小さすぎます
👨‍🎓: 3 は？
🖥️: 小さすぎます
👨‍🎓: 4 は？
🖥️: 小さすぎます
(以下略)
```

このアプローチは **線形探索** と呼ばれます。すべての数字が一列に並んでいるかのように推測するからです。確かにうまくいきます。

非常に幸運な場合、コンピューターが1を選択し、最初の推測でその数字が当たることもあります。

しかし、最悪の場合、何回推測する必要があるでしょうか？ コンピューターが100を選択した場合、100回の推測が必要になります。

### 二分探索法（バイナリサーチ）

もっとよい方法があります。まずは50を推測してみましょう。

```
👨‍🎓: 50 は？
🖥️: 小さすぎます
```

50 は小さすぎました。しかし、この時点で1 から50 までの数字はすべて小さすぎることがわかります。

逆に、もし、「大きすぎます」と言われたら、1から49までを除外できます。

どちらの場合でも、数字の半分を除外できます。

さて、50は小さすぎるので、次に、50と100の中間の、75 と推測します。

```
👨‍🎓: 75 は？
🖥️: 大きすぎます
```

75 は大きすぎました。が、この場合も、残りの数字の半分が除外されます。つまり75～100はもはや推測の対象になりません。

次に、（50 と75 の中間である）63 と推測します。

```
👨‍🎓: 63 は？
🖥️: 大きすぎます
```

このように、毎回「中央の数字を推測し、残りの数字の半分を除外する」を繰り返します。そうすれば、最後に正解に行き着くでしょう。

```
👨‍🎓: 57 は？
🖥️: 正解！
```

この半分にするアプローチを **二分探索** と呼び、コンピューターが 1 から 100 までのどの数字を選択したかに関係なく、この手法を使用すると最大 7 回の推測でその数字を見つけることができます。

|探索回数|残りの数字|
|---|--:|
|0|100|
|1|50|
|2|25|
|3|13|
|4|7|
|5|4|
|6|2|
|7|1|

---

今度は、ある単語を辞書で探しているとしましょう。その辞書には、240000 語が収録されています。最悪のケースでは、線形探索と二分探索に必要なステップ数はどれくらいになるでしょうか。

線形探索では、探している単語が辞書の最後の最後にある場合は、**240000 ステップ**が必要になります。

二分探索では、単語が1 つだけになるまで、ステップごとに残りの単語の個数を半分にしていきます。

|探索回数|残りの単語|
|---|--:|
|0|240000|
|1|120000|
|2|60000|
|3|30000|
|4|15000|
|5|7500|
|6|3250|
|7|1875|
|8|938|
|9|469|
|10|235|
|11|118|
|12|59|
|13|30|
|14|15|
|15|8|
|16|4|
|17|2|
|18|1|

したがって、二分探索に必要なステップ数は、**18ステップ** になります。これは大きな差です。




